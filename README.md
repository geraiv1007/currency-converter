# Конвертер валют
Данный проект представляет собой стандартный конвертер валют с получением актуальных и исторических курсов валют, динамики изменения курсов валют и стандартной конвертации пары валют.\
В качестве API использован https://apilayer.com/marketplace/currency_data-api
## Стек
- **FastAPI** — основной web-фреймворк
- **Pydantic** — валидация данных
- **pydantic-settings** — управление конфигурацией через переменные окружения
- **PostgreSQL** — основная база данных
- **Redis** — кэширование данных
- **SQLAlchemy** — ORM для взаимодействия с БД
- **Alembic** — миграции схемы БД
## Требования
Для корректной работы требуется python 3.12. Необходимые библиотеки указаны в файле **poetry.lock**.\
Переменные окружения извлекаются **только из файлa .env** из корневой папки проекта.\
Для примера приложен файл **.env.example**, в котором перечислены все необходимые переменные окружения.
## Описание
### Авторизация
Авторизация реализована через связку access и refresh токенов. По истечению срока жизни access токена необходимо передать на эндпойнт `'/refresh_tokens'` refresh токен и получить новую пару токенов.

Токены необходимо передавать в заголовках запроса:
- access токен в заголовке **Authorization** в формате `{'Authorization': 'bearer <токен>'}`
- refresh токен в заголовке **X-Refresh-Token** в формате `{'X-Refresh-Token': '<токен>'}`

Логин возможен тремя способами:
1. `'/login'` стандартный логин через username и password
2. `'/login/google'` внешняя аутентификация через oauth google
3. `'/login/yandex'` внешняя аутентификация через oauth yandex
### Основные функции
Доступны следующие эндпойнты:
1. `'/currency/list'`\
   Получение списка всех валют
2. `'/currency/convert'`\
   Конвертация определенного количества одной валюты в другую на конкретную дату
3. `'/currency/exchange_rate/live'`\
   Получение наиболее актуального курса одной и более валют по отношению к исходной
4. `'/currency/exchange_rate/hist'`\
   Получение курса одной и более валют по отношению к исходной на определенную дату
5. `'/currency/exchange_rate/change'`\
   Получение динамики курса одной и более валют по отношению к исходной за указанный промежуток времени
6. `'/currency/exchange_rate/daily'`\
    Получение ежедневного курса одной и более валют по отношению к исходной за указанный промежуток времени (не более 365 дней)
